# 指令表

## 名词解释

### 指令前缀

一个特殊字符，任何以该字符开头的消息会进行识别是否为指令，指令前缀有: #, $, !, ！, (也支持无指令前缀)

### 指令域

指触发该指令的环境，比如一条群指令，在私聊情况下是不会触发bot的，指令域有:私聊，群，不限

### 权限

有些指令需要一定权限才能执行，权限有:bot管理员=群主>群管理>群员

## 注意事项

为了指令系统能正确区分消息，指令，指令参数。**指令后面一定要加上空格，参数之间也用空格分割**

## 指令

### 基础指令

| 功能     | 指令               | 描述                     | 指令域 | 权限     |
|:-------|:-----------------|:-----------------------|:----|:-------|
| 检查数据库  | checkDB [表名]     | 检查某张表是否存在,缺省表名则列出当前所有表 | 私聊  | bot管理员 |
| 组件动态开关 | 开关 [开启/关闭] [组件名] | 动态开启关闭某一功能             | 私聊  | bot管理员 |
| 帮助     | help/帮助          | 发送本页面连接                | 不限  | 任何人    |
| 测试     | hello            | 测试bot是否启动成功            | 不限  | 任何人    |

### 动态组件(可动态开关的指令集合)

- 这里的默认开启状态是指 如果没有在 WMagicBotR.properties 中配置的情况下，默认的状态
- 如果在 WMagicBotR.properties 配置了默认状态,会以配置文件优先
- 私聊bot [开关],可以看到目前所有支持的动态组件，以及其开启状态

| 组件名称                    | 描述                  | 默认开启状态 |
|:------------------------|:--------------------|:-------| 
| component.pcr.guild     | pcr工会战组件            | false  |
| component.pcr.jjc       | pcr jjc查询组件(文字)     | false  |
| component.pcr.jjc.image | pcr jjc查询组件(图形)     | false  |
| component.ChatGPT       | 聊天机器人,需要chatgpt的key | false  |

### 自带小功能

| 功能         | 指令                            | 描述                                                                             | 指令域 | 权限  |
|:-----------|:------------------------------|:-------------------------------------------------------------------------------|:----|:----|
| 每日抽签       | 抽签/gacha                      | 每天一次抽签测运气，重复抽签不会改变世界线哦                                                         | 群   | 任何人 |
| roll点      | roll [数字 可选]                  | 随机roll一个[0-数字]，省略默认为100                                                        | 群   | 任何人 |
| 计划表 创建     | plan new [目标名] [目标数量]         | 创建一个计划任务，比如我今天要俯卧撑 100个                                                        | 群   | 任何人 |
| 计划表 增量更新   | plan add [目标名] [增加数量]         | 增量更新计划，比如刚刚做了10个俯卧撑，用本指令增加10                                                   | 群   | 任何人 |
| 计划表 直接更新   | plan update [目标名] [目前数量]      | 直接更新计划，现在已经做了90个俯卧撑                                                            | 群   | 任何人 |
| 计划表 查询目标   | plan check [目标名]              | 看一下我今天做了几个俯卧撑了                                                                 | 群   | 任何人 |
| 计划表 查询所有目标 | plan                          | 看看我今天一共立了多少flag                                                                | 群   | 任何人 |
| 计划表 删除     | plan del [目标名]                | 销毁flag，今天不俯卧撑了！                                                                | 群   | 任何人 |
| 编码 朝代      | 加密 [明文]                       | 本质是编码后用字典替换编码，而非加密。<br>由于替换后是 夏商周... 所以称为朝代<br>替换源码中的自定义编码表 可以个性化，比如换成 动物，颜色等等 | 群   | 任何人 |
| 解码 朝代      | 解密 [密文]                       | 同上 将编码还原为原本文字                                                                  | 群   | 任何人 |
| 备忘提醒       | 备忘 yyyy-MM-dd/HH:mm:ss [备忘内容] | bot会在设定的时间将备忘内容@提醒发送人                                                          | 群   | 任何人 |
| 备忘提醒       | 备忘 HH:mm:ss后 [备忘内容]           | bot会在一段时间后将备忘内容@提醒发送人                                                          | 群   | 任何人 |
| 图片混沌处理     | 混沌 加/解密 [密码] [原图]             | 将给出的图片混沌处理,图片尺寸不宜过大,越大效率越低                                                     | 群   | 任何人 |
| 彩虹屁        | 夸我                            | 获得一句彩虹屁                                                                        | 群   | 任何人 |
| 全自动彩虹屁     | 开启/关闭夸夸模式                     | 在发言后随机进行彩虹屁吹捧                                                                  | 群   | 任何人 |
| 毒鸡汤        | 鸡汤                            | 获得一句毒鸡汤                                                                        | 群   | 任何人 |
| 盆友圈文案      | 动态                            | 获得一句盆友圈文案                                                                      | 群   | 任何人 |

### pcr 公会战(已废弃，目前无法适配新版公会战)

公会战功能仅在群内可用<br>

| 功能       | 指令                     | 描述                                                           | 权限                    |
|:---------|:-----------------------|:-------------------------------------------------------------|:----------------------|
| 创建公会     | 创建公会                   | 创建公会                                                         | 群主，bot管理员             |
| 解散公会     | 人生有梦各自精彩               | 解散公会                                                         | 群主，bot管理员             |
| 初始化数据    | 初始化公会战                 | 清空公会战数据                                                      | 群管理员以上                |
| 加入公会     | 加入公会 [@某人 可选]          | 加入到公会名单，如果有@则为加入他人                                           | 任何人<br>加入他人需要 群管理以上权限 |
| 加入全部成员   | 加入全部成员                 | 将群内所有人除了本机器人加入公会                                             | 群管理以上权限               |
| 查刀       | 查刀                     | 查刀功能目前数据返回原始json,还没有做格式化处理,后续待优化                             | 任何人                   |
| 查看boss状态 | 状态                     | 查看boss状态                                                     | 任何人                   |
| 修改boss状态 | 修改状态 [周目] [几王] [血量]    | 有时候由于报刀错误，需要调整boss状态，使用本指令                                   | 群管理以上权限               |
| 报刀       | 报刀 伤害 [@某人 可选] [昨日 可选] | 对boss造成伤害但未击败时用，记录伤害<br>如果有@则为代报<br>如果有“昨日”则报昨日刀(有总敬业公会打隔日刀) | 任何人                   |
| 尾刀       | 尾刀 [@某人 可选] [昨日 可选]    | 同上 击败boss时使用                                                 | 任何人                   |
| SL       | sl[?]                  | 打boss每日有一次强退挽救的机会，用以记录当天的sl<br>带上？则为查询当天是否sl                 | 任何人                   |
| 撤销出刀     | 撤销/撤回                  | 撤销上一次报刀（非管理员只能撤销自己的记录）                                       | 任何人<br>群管理可以撤销非本人刀    |
| 预约boss   | 预约/预定 [x,x=1~5]        | 当预约的boss出现时@通知                                               | 任何人                   |
| 查询boss预约 | 查预约/查预定                | 查询预约boss的成员,配合排刀使用                                           | 任何人                   |
| 取消预约boss | 取消预约/取消预定/取消 [x,x=1~5] | 取消预约某一boss                                                   | 任何人                   |
| 挂树       | 挂树                     | 当前boss被击败时@通知                                                | 任何人                   |
| 查树       | 查树                     | 查看当前树上的成员                                                    | 任何人                   |
| 申请出刀     | 申请出刀                   | 锁定boss3分钟 提醒后面申请出刀的人有人正在挑战boss，超时自动解锁                        | 任何人                   |
| 锁定boss   | 锁定 [留言 可选]             | 锁定boss3分钟 提醒后面申请出刀的人，空格留言                                    | 任何人                   |
| 解锁boss   | 解锁                     | 解锁boss 其他人可以继续申请                                             | 任何人                   |

### pcr jjc

| 功能        | 指令                    | 描述                               | 指令域 | 权限     |
|:----------|:----------------------|:---------------------------------|-----|:-------|
| 刷新nick文件  | 刷新nickname            | 重新下载后刷新nickname文件,当有新角色登场的时候需要更新 | 私聊  | bot管理员 |
| 重载nick文件  | 重载nickname            | 重新加载nickname文件,适合手动修改文件添加昵称后刷新缓存 | 私聊  | bot管理员 |
| jjc查询 文字版 | jjc文字 [角色1] [角色2] ... | jjc查询 目前默认国服不可更改，返回文字版作业         | 不限  | 任何人    |
| jjc查询 图形版 | jjc查询 [角色1] [角色2] ... | 同上,但是直接返回角色头像                    | 不限  | 任何人    |
| jjc返回码查询  | pcrdcode [code]       | 查询pcrdfans 返回状态码的含义              | 不限  | 任何人    |

### 火纹engage续战共享

| 功能    | 指令               | 描述                         | 指令域 | 权限  | 样例                    |
|:------|:-----------------|:---------------------------|:----|:----|:----------------------|
| 续战查询  | 续战查询/查询续战        | 获得一些可用的续战码                 | 不限  | 任何人 | 续战查询                  |
| 共享续战码 | 续战登记/登记续战 续战码 备注 | 将你的续战码共享给大家                | 不限  | 任何人 | 续战登记 abcd12 困难森林，快来大佬 |
| 结束续战码 | 续战结束/结束续战 续战码    | 将这个续战标记为已经结束               | 不限  | 任何人 | 续战结束 abcd12           |
| 认领战斗  | 续战认领/认领 续战码      | 使用一个续战码开始战斗了，别人暂时无法使用这个续战码 | 不限  | 任何人 | 续战认领 abcd12           |
| 交接战斗  | 续战交接/交接 续战码      | 使用续战码战斗结束，别人可以继续使用这个续战码    | 不限  | 任何人 | 续战交接 abcd12           |

### 聊天机器人

默认关闭,需要管理员使用开关指令打开

| 功能            | 指令           | 描述                              | 指令域 | 权限     | 样例               |
|:--------------|:-------------|:--------------------------------|:----|:-------|:-----------------|
| 聊天            | xml 对话内容     | 聊天                              | 不限  | 不限     | xml 你好           |
| 设定性格          | xmlset 性格描述  | 设定机器人会以什么样的性格回答,每一个群成员独立        | 不限  | 不限     | xmlset 会用傲娇的态度回答 |
| 清空上下文记忆       | xmlclear     | 清空上下文对话记忆,调教失败后重开,谨慎使用,每一个群成员独立 | 不限  | 不限     | xmlclear         |
| 画画            | gpti 描述      | 让gpt画画                          | 不限  | 不限     | gpti 画一只可爱的小猫咪   |
| 根据预训练向量集合回答问题 | xmla 问题      | 根据预训练向量集合回答问题                   | 不限  | 不限     | gpta 具体问题        |
| 重载训练向量集合      | reloadvector | 重新读取提供的向量集合                     | 私聊  | bot管理员 | reloadvector     |